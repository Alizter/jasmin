sudo: required
dist: trusty
language: coq
branches:
  only:
  - master
services:
- docker
notifications:
  email:
  - false
env:
- COQV=8.7-1.6.4 TARGET=compiler
- COQV=8.7-1.6.4 TARGET=coq
before_install:
- docker pull jasminlang/test-box:${COQV}
script:
- >-
  docker run -v $PWD:/home/ci/jasmin:rw jasminlang/test-box:${COQV}
  sh -c "git clone jasmin jasmin.dev && opam config exec -- make -C jasmin.dev/travis check-${TARGET}"
