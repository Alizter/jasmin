extern fn sub<n : u64>(zp, xp, yp : u64[n]) {
  
  reg x, y, z : u64<n>; 

  for i in  0..n {
    x<i> = xp[i];
    y<i> = yp[i];
    if i = 0 {
      cf? x<0> -= y<0>;
    } else {
      cf? x<i> -= y<i> - cf;
    }
  }

  sub0  = 0;
  sub1 = 38;
  sub1 = sub0 if !cf;

  for i in  0..n {
    if i = 0 {
      cf? x<0> -= sub1;
    } else {
      cf? x<i> -= sub0 - cf;
    }
  }

  sub0 = sub1 if cf;
  x<0> -= sub0;

  for j in 0..n {
    zp[j] = x<j>;
  }
}
