/* This test should succeed and test/showcase all features of the parser. */
param n  : u64;
param n2 : u64;

fn foo() -> stack u64 {

  reg x, h, l : u64;
  flag cf : bool;

  x = 0xffff_ffff_ffff;
  cf, x += 0xffff_ffff_ffff;
  cf, x += 11 + cf;
  cf, x = x + 11 + cf;
  h, l = x * 10;

  return h;
}

fn fun_decl_only(stack x : u64) -> stack u64;

fn void_fun() {
  reg w : u64;
}

extern fn bar(stack x, y : u64[n1*n2], reg z : u64[n3*n4], stack w : u64)
    -> stack u64[n2*2] {
  reg u : u64[n2*2];

  u[0] = foo();
  void_fun();
  return u;
}
